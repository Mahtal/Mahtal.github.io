const Data={Categories:{RESPIRATORY:{id:0,name:"Respiratory"},ENT:{id:1,name:"Ear, nose and throat"},EYES:{id:2,name:"Eyes"},DENTAL:{id:3,name:"Dental"},CNS:{id:4,name:"CNS"},SKIN:{id:5,name:"Skin"},GASTRO:{id:6,name:"Gastrointestinal"},GENITO:{id:7,name:"Genito-urinary"}},Infections:{COPD:{id:0,name:"COPD - acute exacerbations",catId:0},PERTUSSIS:{id:1,name:"Pertussis (Whooping cough)",catId:0},PNEUMONIA_A:{id:2,name:"Pneumonia - adult",catId:0},PNEUMONIA_C:{id:3,name:"Pneumonia - child",catId:0},OTITIS_E:{id:4,name:"Otitis externa - acute",catId:1},OTITIS_M:{id:5,name:"Otitis media -acute",catId:1},SORE_THROAT:{id:6,name:"Sore throat - including pharyngitis and tonsillitis",catId:1},SINUSITIS:{id:7,name:"Sinusitis - acute",catId:1},CONJUNC:{id:8,name:"Conjunctivitis",catId:2},DENTAL_ABSCESS:{id:9,name:"Dental abscess",catId:3},ENDOCARDITIS:{id:10,name:"Prophylaxis of infective endocarditis prior to invasive dental procedures",catId:3},MENINGITIS:{id:11,name:"Meningitis and meningococcal septicaemia",catId:4},BITES:{id:12,name:"Bites - human and animal",catId:5},BOILS:{id:13,name:"Boils (furuncles)",catId:5},CELLULITIS:{id:14,name:"Cellulitis",catId:5},DIABETIC_FOOT:{id:15,name:"Diabetic foot infections",catId:5},IMPETIGO:{id:16,name:"Impetigo",catId:5},MASTITIS:{id:17,name:"Mastitis",catId:5},CAMP:{id:18,name:"Campylobacter enterocolitis",catId:6},CLOST:{id:19,name:"Clostridium difficile colitis",catId:6},DIVERT:{id:20,name:"Diverticulitis",catId:6},GIARDIASIS:{id:21,name:"Giardiasis",catId:6},SALMONELLA:{id:22,name:"Salmonella enterocolitis",catId:6},BAC_VAG:{id:23,name:"Bacterial vaginosis",catId:7},CHLAM:{id:24,name:"Chlamydia",catId:7},EPID_ORCH:{id:25,name:"Epididymo-orchitis",catId:7},GONOR:{id:26,name:"Gonorrhoea",catId:7},PELVIC_ID:{id:27,name:"Pelvis inflammatory disease",catId:7},TRICH:{id:28,name:"Trichomoniasis",catId:7},URETH:{id:29,name:"Urethritis - acute non-specific, male",catId:7},UTI_A:{id:30,name:"Urinary Tract Infection - Cystitis: adult",catId:7},UTI_C:{id:31,name:"Urinary Tract Infection - Cystitis: child",catId:7},UTI_P:{id:32,name:"Urinary Tract Infection - Pyelonephritis",catId:7}},Questions:{SEVERITY:{Q:"Severity",A:["Mild","Severe or Systemically Unwell"]},AGE:{Q:"Patient Age",A:["Adult","Child < 12 years","Infant ≤ 6 weeks"]},FACIAL_CELLULITIS:{Q:"Periorbital or facial Cellulitis",A:["None or Very Mild","Moderate/Severe"]},MRSA:{Q:"MRSA Colonization",A:["None","Known MRSA colonization"]},PEN1:{Q:"Penicillin Allergy",A:["No","Low Risk","High Risk"]},PEN2:{Q:"Penicillin Allergy",A:["No","Yes"]},MACROLIDES:{Q:"Macrolides Allergy",A:["No","Yes"]},SYMPTOMS3WEEKS:{Q:"Onset of symptoms",A:["≥ 3 weeks","< 3 weeks","Unknown"]},AGE1YEAR:{Q:"Child aged < 1 year or their caregiver",A:["No","Yes"]},PREGNANT:{Q:"Pregnant",A:["No","Yes"]},ASTHMA:{Q:"Severe asthma or immunocompromised",A:["No","Yes"]}},Antibiotics:{AMOX:{id:0,name:"Amoxicillin",note:""},DOXY:{id:1,name:"Doxycycline"},AZITH:{id:2,name:"Azithromycin"},ERYTH:{id:3,name:"Erythromycin"},COTRIM:{id:4,name:"Trimethoprim + suflamethoxazole (co-trimoxazole)"},ROXI:{id:5,name:"Roxithromycin"},FLUMECLIO:{id:6,name:"Flumetasone + clioquinol (Locorten Vioform)"},DEXA:{id:7,name:"Dexamethasone + framycentin + gramicidin (sofradex)"},FLUC:{id:8,name:"Flucloxacillin"},CEFA:{id:9,name:"Cefalixin"},CIPRO:{id:10,name:"Ciprofloxacin + hydrocortisone (Ciproxin HC)"},FRAM:{id:11,name:"Framycetin (Soframycin)"},PHEN:{id:12,name:"Phenoxymethylpenicillin (Penicillin V)"},BP:{id:13,name:"benzathine penicillin"},AMOXX:{id:14,name:"Amoxicillin clavulanate"},CHLORA:{id:15,name:"Chloramphenicol 0.5% eye drops"},KENA:{id:16,name:"Triamcinolone + neomycin + gramicidin + nystatin (Kenacomb)"}}};var DataGateway={categoryNames:function(){var e=[];for(const t in Data.Categories)e.push(Data.Categories[t].name);return e},infectionsForCategoryId:function(e){var t=[];for(const a in Data.Infections)Data.Infections[a].catId==e&&t.push(Data.Infections[a]);return t}};function initCategoryCard(e){var t=e.name,a=t.substr(0,3).toLowerCase(),n=e.id,i=document.createElement("div");i.className="card noselect clickable "+a,i.dataset.name=t,i.dataset.shortName=a,i.dataset.id=n;var s=document.createElement("img");s.className="left",s.src="images/"+a+".png";var o=document.createElement("div");o.className="card-text",o.innerText=t.toUpperCase();var r=document.createElement("img");r.className="right",r.src="images/chevron-right-white.svg";var d=document.createElement("div");return d.className="right-colour-bar "+a+"-saturate",i.appendChild(s),i.appendChild(o),i.appendChild(d),i.appendChild(r),i.onclick=function(e){disableUserInteraction(e.target,250),showInfections(e.target)},i}function initInfectionCard(e){var t=document.createElement("div");t.className="card noselect clickable",t.dataset.name=e.name,t.dataset.infectionId=e.id;var a=document.createElement("div");a.className="card-text",a.innerText=e.name.toUpperCase(),t.appendChild(a);var n=document.createElement("img");return n.className="right",n.src="images/chevron-right.svg",t.appendChild(n),t.onclick=function(e){disableUserInteraction(e.target,250),showCDQuestionnaire(e.target)},t}function initClinicalQuestionCard(e){var t=document.createElement("div");t.className="card c-question";var a=document.createElement("div");a.className="c-question-header",a.innerText=e.Q,t.appendChild(a);for(var n=0;n<e.A.length;n++){var i=document.createElement("div");i.className="c-question-selection clickable"+(0==n?" selected":""),i.innerText=e.A[n],i.onclick=function(e){setSelected(e.target)},t.appendChild(i)}return t}function initClinicalFeaturesCard(e){var t=document.createElement("div");t.className="card c-features";var a=document.createElement("div");for(var n in a.className="c-question-header",a.innerText="Clinical Features",t.appendChild(a),e){var i=document.createElement("div");i.className="c-detail",i.innerText=e[n],i.onclick=function(e){this.firstElementChild.classList.contains("checked")?this.firstElementChild.classList.remove("checked"):this.firstElementChild.classList.add("checked")};var s=document.createElement("div");s.className="checkbox clickable",i.appendChild(s),t.appendChild(i)}return t}function initRiskFactorsCard(e){var t=document.createElement("div");t.className="card riskfactors";var a=document.createElement("div");for(var n in a.className="c-question-header",a.innerText="Risk Factors",t.appendChild(a),e){var i=document.createElement("div");i.className="c-detail",i.innerText=e[n],i.onclick=function(e){this.firstElementChild.classList.contains("checked")?this.firstElementChild.classList.remove("checked"):this.firstElementChild.classList.add("checked")};var s=document.createElement("div");s.className="checkbox clickable",i.appendChild(s),t.appendChild(i)}return t}function initSpacerWithText(e){var t=document.createElement("div");t.className="spacer";var a=document.createElement("div");a.className="line",t.appendChild(a);var n=document.createElement("div");return n.className="text",n.innerText=e,t.appendChild(n),t}function initTreatmentLength(e){var t=document.createElement("div");return t.className="card treatment-length",t.innerHTML="Treatment <p>"+e+" total</p>",t}function nextPageAnim(){var e=document.getElementById("page-container"),t=parseInt(e.style.transform.replace(/[^\d-]/g,"")),a=isNaN(t)?-25:t-25;e.style.transform="translateX("+a.toString()+"%)"}function previousPageAnim(){var e=document.getElementById("page-container"),t=parseInt(e.style.transform.replace(/[^\d-]/g,"")),a=isNaN(t)?0:Math.min(0,t+25);e.style.transform="translateX("+a.toString()+"%)"}function setHeader(e,t="black",a=!1,n=!1){var i=document.getElementById("header");if(i.getElementsByClassName("title")[0].innerText=e,null!=t){var s=i.getElementsByClassName("colour-bar")[0];s.className="colour-bar",s.classList.add(t+"-saturate")}1==a?i.getElementsByClassName("back-button")[0].classList.add("visible"):i.getElementsByClassName("back-button")[0].classList.remove("visible")}function showCategories(){var e=document.getElementById("page1");e.innerHTML="";var t=Data.Categories;for(var a in t){var n=initCategoryCard(t[a]);e.appendChild(n)}}function showInfections(e){var t=document.getElementById("page2");t.innerHTML="";var a=DataGateway.infectionsForCategoryId(e.dataset.id);for(var n in a){var i=initInfectionCard(a[n]);t.appendChild(i)}setHeader(e.dataset.name,e.dataset.shortName,!0,!0),nextPageAnim(),window.history.pushState({pageIndex:1,headerAttributes:{title:e.dataset.name,colourBarAtt:e.dataset.shortName,leftActionVisible:!0,rightActionVisible:!0}},"","")}function showCDQuestionnaire(e){var t=document.getElementById("page3");if(t.innerHTML="",t.scrollTop,Questionnaires.infectionId[e.dataset.infectionId]){var a=Questionnaires.infectionId[e.dataset.infectionId].clinicalFeatures;if(console.log(a),null!=a&&a.length>0){var n=initClinicalFeaturesCard(a);t.appendChild(n)}var i=Questionnaires.infectionId[e.dataset.infectionId].riskFactors;if(null!=i&&i.length>0){var s=initRiskFactorsCard(i);t.appendChild(s)}var o=Questionnaires.infectionId[e.dataset.infectionId].questions;for(var r in o){var d=initClinicalQuestionCard(o[r]);t.appendChild(d)}var c=document.createElement("div");c.className="button go clickable",c.innerText="SHOW RECOMMENDATION",c.onclick=function(t){showRecommendations(e)},t.appendChild(c),setHeader(e.dataset.name,"black",!0,!0),nextPageAnim(),window.history.pushState({pageIndex:2,headerAttributes:{title:e.dataset.name,colourBarAtt:"black",leftActionVisible:!0,rightActionVisible:!0}},"","")}else showInTheWorks()}function showRecommendations(e){var t=getSelectedAnswers(),a=getSelectedClinicalFeatures(),n=getSelectedRiskFactors(),i=Questionnaires.infectionId[e.dataset.infectionId].recommendation(t,a,n),s=document.getElementById("page4");if(s.innerHTML="",i.treatments){var o=initTreatmentLength(i.totalCourseLength);for(var r in s.appendChild(o),i.treatments){(h=document.createElement("div")).className="card recommendation";var d=document.createElement("div");d.className="ab",d.innerText=i.treatments[r].medicine.name.toUpperCase(),h.appendChild(d);var c=document.createElement("div");c.className="regimen-container",h.appendChild(c);var l=document.createElement("div");l.className="dose",l.innerText=i.treatments[r].dosageRegimen.dose,c.appendChild(l);var m,u=document.createElement("div");if(u.className="delivery",u.innerText=i.treatments[r].dosageRegimen.dMethod.toUpperCase(),l.appendChild(u),(m=document.createElement("div")).className="frequency",m.innerText=i.treatments[r].dosageRegimen.freq,c.appendChild(m),(m=document.createElement("div")).className="length",m.innerText=i.treatments[r].dosageRegimen.cLength,c.appendChild(m),s.appendChild(h),i.treatments[r].dosageRegimen.isLoading){var g=initSpacerWithText("THEN");s.appendChild(g)}}}if(i.notes)for(var r in i.notes){var h;(h=document.createElement("div")).className="card note",h.innerText=i.notes[r],s.appendChild(h)}nextPageAnim(),window.history.pushState({pageIndex:3,headerAttributes:{title:e.dataset.name,colourBarAtt:"black",leftActionVisible:!0,rightActionVisible:!0}},"","")}function disableUserInteraction(e,t){e.style.pointerEvents="none",setTimeout(function(){e.style.pointerEvents=""},t,e)}function showInTheWorks(){alert("In the works")}window.onpopstate=function(e){if(console.log(e.state),null===e.state)setHeader("Antibiotic Guidelines","black",!1,!1);else{var t=e.state.headerAttributes;setHeader(t.title,t.colourBarAtt,t.leftActionVisible,t.rightActionVisible)}previousPageAnim()};var recommendation={treatment:[{medicine:{},dosageRegimen:{},notes:[],isLoading:!1}],totalCourseLength:"",warnings:[],notes:[]},dosageRegimen={amount:"",dMethod:"",freq:"",cLength:""};const Questionnaires={infectionId:{0:{questions:[Data.Questions.PEN2],clinicalFeatures:["Purulent sputum","Increased sputum production","Increased dyspnoea","Severe airflow obstruction"],recommendation:function(e,t){for(var a=0,n=t.length;n--;)a+=t[n];return a>=2||1==t[3]?(dosageRegimen={dose:"500mg",dMethod:"PO",freq:"3x\ndaily",cLength:"5\ndays"},recommendation={treatments:[{medicine:Data.Antibiotics.AMOX,dosageRegimen:dosageRegimen}],totalCourseLength:"5 days"},e[0]>0&&(loadingDose={isLoading:!0,dose:"200mg",dMethod:"PO",freq:"Loading\ndose",cLength:"1\nday"},dosageRegimen={dose:"100mg",dMethod:"PO",freq:"1x\ndaily",cLength:"4\ndays"},recommendation={treatments:[{medicine:Data.Antibiotics.DOXY,dosageRegimen:loadingDose},{medicine:Data.Antibiotics.DOXY,dosageRegimen:dosageRegimen}],totalCourseLength:"5 days"}),recommendation.notes=["Longer courses may not provide additional clinical benefit"]):recommendation={notes:["Antibiotic treatment is usually only necessary for patients with moderate to severe signs and symptoms of infection. Approximately half of COPD exacerbations are triggered by viruses rather than bacteria."]},recommendation}},1:{questions:[Data.Questions.SYMPTOMS3WEEKS,Data.Questions.MACROLIDES],clinicalFeatures:[],riskFactors:["Pregnant","Child aged < 1 year or their caregiver","Severe asthma or immunocompromised"],recommendation:function(e,t,a){for(var n=0,i=a.length;i--;)n+=a[i];return e[0]>0||n>=1?(1==e[1]?(dosageRegimen={dose:"960mg",dMethod:"PO",freq:"2x\ndaily",cLength:"14\ndays"},recommendation={treatments:[{medicine:Data.Antibiotics.COTRIM,dosageRegimen:dosageRegimen}],totalCourseLength:"14 days"}):(loadingDose={isLoading:!0,dose:"500mg",dMethod:"PO",freq:"Loading\ndose",cLength:"1\nday"},dosageRegimen={dose:"250mg",dMethod:"PO",freq:"1x\ndaily",cLength:"4\ndays"},recommendation={treatments:[{medicine:Data.Antibiotics.AZITH,dosageRegimen:loadingDose},{medicine:Data.Antibiotics.AZITH,dosageRegimen:dosageRegimen}],totalCourseLength:"5 days"}),recommendation.notes=["Patients should be advised to avoid contact with others, especially infants and children, until at least five days of antibiotic treatment has been taken. Children with pertussis can deteriorate rapidly and may require hospitalisation."]):recommendation={notes:["Antibiotic treatment is not recommended"]},recommendation}},2:{clinicalFeatures:["Altered mental state","respiratory rate > 30/min","pulse rate > 125/min","O2 saturation ≤ 92%","BP systolic < 90 mm Hg or diastolic < 60 mm Hg"],riskFactors:["Co-morbidities","age > 65 years","Lack of reliable observation at home","Smoker aged > 50"],recommendation:function(e,t,a){recommendation={};for(var n=0,i=t.length;i--;)n+=t[i];return(n>0||1==a[0]||1==a[1]||1==a[2])&&(recommendation.notes=["Consider referral to hospital"]),recommendation}},3:{clinicalFeatures:["Age < 6 months","Drinking less than half their normal amount","Oxygen saturation ≤ 92% on air"," Increased respiratory effort","Temperature < 35°C or > 40°C","Decreased breath sounds or dullness to percussion","Lack of reliable observation at home"]},14:{questions:[Data.Questions.SEVERITY,Data.Questions.FACIAL_CELLULITIS,Data.Questions.AGE,Data.Questions.MRSA,Data.Questions.PEN1],clinicaFeatures:[],recommendation:function(e,t){return recommendation=1==e[0]||1==e[1]?{notes:["Discuss referral to hospital for consideration of IV antibiotics"]}:2!=e[2]||1!=e[3]&&2!=e[4]?0==e[3]&&1==e[4]?{antibiotic:Data.Antibiotics.CEFA,dose:"500mg",dMethod:"PO",freq:"4 x Daily",cLength:"5 Days"}:1==e[3]||2==e[4]?{antibiotic:Data.Antibiotics.COTRIM,dose:"960mg\n(2 tablets)",dMethod:"PO",freq:"2 x Daily",cLength:"5-7 Days"}:{antibiotic:Data.Antibiotics.FLUC,dose:"500mg",dMethod:"PO",freq:"4 x Daily",cLength:"5 Days"}:{antibiotic:Data.Antibiotics.ERYTH,dose:"500mg",dMethod:"PO",freq:"2 x Daily",cLength:"5 Days"}}}}};var ClinicalFeatures={infectionId:{0:{features:["Purulent sputum","Increased sputum production","Increased dyspnoea"],rel:2}}};function setSelected(e){var t=e.parentElement;for(i=0;i<t.children.length;i++)t.children[i].classList.remove("selected");e.classList.add("selected")}function getSelectedAnswers(){var e=[],t=document.getElementById("page3").getElementsByClassName("card c-question");for(i=0;i<t.length;i++){var a=t[i],n=a.getElementsByClassName("selected")[0],s=Array.prototype.indexOf.call(a.children,n)-1;e.push(s)}return e}function getSelectedClinicalFeatures(){var e=[],t=document.getElementById("page3").getElementsByClassName("card c-features");if(null!=t&&t.length>0){var a=t[0].getElementsByClassName("checkbox");for(i=0;i<a.length;i++)a[i].classList.contains("checked")?e.push(1):e.push(0)}return e}function getSelectedRiskFactors(){var e=[],t=document.getElementById("page3").getElementsByClassName("card riskfactors");if(null!=t&&t.length>0){var a=t[0].getElementsByClassName("checkbox");for(i=0;i<a.length;i++)a[i].classList.contains("checked")?e.push(1):e.push(0)}return e}